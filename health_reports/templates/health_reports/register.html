import React, { useState } from 'react';
import { User, Mail, Lock, Phone, Building2, UserCircle, Eye, EyeOff, CheckCircle } from 'lucide-react';

export default function ModernRegisterPage() {
  const [formData, setFormData] = useState({
    username: '',
    email: '',
    firstName: '',
    lastName: '',
    password1: '',
    password2: '',
    phone: '',
    role: '',
    organization: ''
  });
  
  const [showPassword, setShowPassword] = useState({
    password1: false,
    password2: false
  });
  
  const [focusedField, setFocusedField] = useState('');
  const [submitted, setSubmitted] = useState(false);

  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value
    });
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    setSubmitted(true);
    setTimeout(() => setSubmitted(false), 3000);
  };

  const passwordStrength = (password) => {
    if (!password) return 0;
    let strength = 0;
    if (password.length >= 8) strength++;
    if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
    if (/\d/.test(password)) strength++;
    if (/[^a-zA-Z0-9]/.test(password)) strength++;
    return strength;
  };

  const strength = passwordStrength(formData.password1);
  const strengthColors = ['#e5e7eb', '#fbbf24', '#fb923c', '#22c55e'];
  const strengthLabels = ['Weak', 'Fair', 'Good', 'Strong'];

  return (
    <div className="min-h-screen bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 flex items-center justify-center p-4 font-sans">
      {/* Success Toast */}
      {submitted && (
        <div className="fixed top-6 right-6 bg-white rounded-2xl shadow-2xl p-4 flex items-center gap-3 animate-slideIn z-50">
          <div className="w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center">
            <CheckCircle className="w-6 h-6 text-emerald-600" />
          </div>
          <div>
            <p className="font-semibold text-gray-800">Account Created!</p>
            <p className="text-sm text-gray-500">Welcome to Climate Health Tracker</p>
          </div>
        </div>
      )}

      <div className="w-full max-w-5xl">
        {/* Header Section */}
        <div className="text-center mb-8">
          <div className="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl mb-4 shadow-lg">
            <UserCircle className="w-9 h-9 text-white" />
          </div>
          <h1 className="text-4xl font-bold text-gray-800 mb-2">Create Your Account</h1>
          <p className="text-gray-500 text-lg">Join Climate Health Tracker to monitor and manage health data</p>
        </div>

        {/* Main Card */}
        <div className="bg-white rounded-3xl shadow-xl overflow-hidden">
          <div className="p-8 md:p-12">
            <div>
              {/* Personal Information Section */}
              <div className="mb-8">
                <h3 className="text-lg font-semibold text-gray-800 mb-5 flex items-center gap-2">
                  <div className="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center">
                    <User className="w-4 h-4 text-emerald-600" />
                  </div>
                  Personal Information
                </h3>
                
                <div className="grid md:grid-cols-2 gap-6">
                  {/* Username */}
                  <div className="group">
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Username <span className="text-red-500">*</span>
                    </label>
                    <div className={`relative transition-all ${focusedField === 'username' ? 'scale-[1.01]' : ''}`}>
                      <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <User className={`w-5 h-5 transition-colors ${focusedField === 'username' ? 'text-emerald-500' : 'text-gray-400'}`} />
                      </div>
                      <input
                        type="text"
                        name="username"
                        value={formData.username}
                        onChange={handleChange}
                        onFocus={() => setFocusedField('username')}
                        onBlur={() => setFocusedField('')}
                        className="w-full pl-12 pr-4 py-3.5 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 outline-none transition-all text-gray-800"
                        placeholder="Enter username"
                      />
                    </div>
                  </div>

                  {/* Email */}
                  <div className="group">
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Email Address <span className="text-red-500">*</span>
                    </label>
                    <div className={`relative transition-all ${focusedField === 'email' ? 'scale-[1.01]' : ''}`}>
                      <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <Mail className={`w-5 h-5 transition-colors ${focusedField === 'email' ? 'text-emerald-500' : 'text-gray-400'}`} />
                      </div>
                      <input
                        type="email"
                        name="email"
                        value={formData.email}
                        onChange={handleChange}
                        onFocus={() => setFocusedField('email')}
                        onBlur={() => setFocusedField('')}
                        className="w-full pl-12 pr-4 py-3.5 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 outline-none transition-all text-gray-800"
                        placeholder="you@example.com"
                      />
                    </div>
                  </div>

                  {/* First Name */}
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      First Name <span className="text-red-500">*</span>
                    </label>
                    <input
                      type="text"
                      name="firstName"
                      value={formData.firstName}
                      onChange={handleChange}
                      onFocus={() => setFocusedField('firstName')}
                      onBlur={() => setFocusedField('')}
                      className="w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 outline-none transition-all text-gray-800"
                      placeholder="John"
                    />
                  </div>

                  {/* Last Name */}
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Last Name <span className="text-red-500">*</span>
                    </label>
                    <input
                      type="text"
                      name="lastName"
                      value={formData.lastName}
                      onChange={handleChange}
                      onFocus={() => setFocusedField('lastName')}
                      onBlur={() => setFocusedField('')}
                      className="w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 outline-none transition-all text-gray-800"
                      placeholder="Doe"
                    />
                  </div>
                </div>
              </div>

              {/* Security Section */}
              <div className="mb-8">
                <h3 className="text-lg font-semibold text-gray-800 mb-5 flex items-center gap-2">
                  <div className="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                    <Lock className="w-4 h-4 text-blue-600" />
                  </div>
                  Security
                </h3>
                
                <div className="grid md:grid-cols-2 gap-6">
                  {/* Password */}
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Password <span className="text-red-500">*</span>
                    </label>
                    <div className={`relative transition-all ${focusedField === 'password1' ? 'scale-[1.01]' : ''}`}>
                      <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <Lock className={`w-5 h-5 transition-colors ${focusedField === 'password1' ? 'text-emerald-500' : 'text-gray-400'}`} />
                      </div>
                      <input
                        type={showPassword.password1 ? "text" : "password"}
                        name="password1"
                        value={formData.password1}
                        onChange={handleChange}
                        onFocus={() => setFocusedField('password1')}
                        onBlur={() => setFocusedField('')}
                        className="w-full pl-12 pr-12 py-3.5 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 outline-none transition-all text-gray-800"
                        placeholder="Create a strong password"
                      />
                      <button
                        type="button"
                        onClick={() => setShowPassword({...showPassword, password1: !showPassword.password1})}
                        className="absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors"
                      >
                        {showPassword.password1 ? <EyeOff className="w-5 h-5" /> : <Eye className="w-5 h-5" />}
                      </button>
                    </div>
                    {formData.password1 && (
                      <div className="mt-3">
                        <div className="flex gap-1 mb-1">
                          {[0, 1, 2, 3].map((i) => (
                            <div
                              key={i}
                              className="h-1.5 flex-1 rounded-full transition-all"
                              style={{
                                backgroundColor: i < strength ? strengthColors[strength - 1] : '#e5e7eb'
                              }}
                            />
                          ))}
                        </div>
                        {strength > 0 && (
                          <p className="text-xs font-medium" style={{ color: strengthColors[strength - 1] }}>
                            Password strength: {strengthLabels[strength - 1]}
                          </p>
                        )}
                      </div>
                    )}
                  </div>

                  {/* Confirm Password */}
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Confirm Password <span className="text-red-500">*</span>
                    </label>
                    <div className={`relative transition-all ${focusedField === 'password2' ? 'scale-[1.01]' : ''}`}>
                      <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <Lock className={`w-5 h-5 transition-colors ${focusedField === 'password2' ? 'text-emerald-500' : 'text-gray-400'}`} />
                      </div>
                      <input
                        type={showPassword.password2 ? "text" : "password"}
                        name="password2"
                        value={formData.password2}
                        onChange={handleChange}
                        onFocus={() => setFocusedField('password2')}
                        onBlur={() => setFocusedField('')}
                        className="w-full pl-12 pr-12 py-3.5 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 outline-none transition-all text-gray-800"
                        placeholder="Repeat your password"
                      />
                      <button
                        type="button"
                        onClick={() => setShowPassword({...showPassword, password2: !showPassword.password2})}
                        className="absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors"
                      >
                        {showPassword.password2 ? <EyeOff className="w-5 h-5" /> : <Eye className="w-5 h-5" />}
                      </button>
                    </div>
                    {formData.password2 && formData.password1 !== formData.password2 && (
                      <p className="text-xs text-red-500 mt-1">Passwords do not match</p>
                    )}
                    {formData.password2 && formData.password1 === formData.password2 && (
                      <p className="text-xs text-emerald-500 mt-1 flex items-center gap-1">
                        <CheckCircle className="w-3 h-3" /> Passwords match
                      </p>
                    )}
                  </div>
                </div>
              </div>

              {/* Professional Details Section */}
              <div className="mb-8">
                <h3 className="text-lg font-semibold text-gray-800 mb-5 flex items-center gap-2">
                  <div className="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center">
                    <Building2 className="w-4 h-4 text-purple-600" />
                  </div>
                  Professional Details
                </h3>
                
                <div className="grid md:grid-cols-2 gap-6">
                  {/* Phone */}
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Phone Number
                    </label>
                    <div className={`relative transition-all ${focusedField === 'phone' ? 'scale-[1.01]' : ''}`}>
                      <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <Phone className={`w-5 h-5 transition-colors ${focusedField === 'phone' ? 'text-emerald-500' : 'text-gray-400'}`} />
                      </div>
                      <input
                        type="tel"
                        name="phone"
                        value={formData.phone}
                        onChange={handleChange}
                        onFocus={() => setFocusedField('phone')}
                        onBlur={() => setFocusedField('')}
                        className="w-full pl-12 pr-4 py-3.5 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 outline-none transition-all text-gray-800"
                        placeholder="+1 (555) 000-0000"
                      />
                    </div>
                  </div>

                  {/* Account Type */}
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Account Type <span className="text-red-500">*</span>
                    </label>
                    <select
                      name="role"
                      value={formData.role}
                      onChange={handleChange}
                      onFocus={() => setFocusedField('role')}
                      onBlur={() => setFocusedField('')}
                      className="w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 outline-none transition-all text-gray-800 bg-white"
                    >
                      <option value="">Select account type</option>
                      <option value="citizen">Citizen</option>
                      <option value="health_official">Health Official</option>
                      <option value="researcher">Researcher</option>
                      <option value="admin">Administrator</option>
                    </select>
                  </div>

                  {/* Organization */}
                  <div className="md:col-span-2">
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Organization {formData.role === 'health_official' && <span className="text-red-500">*</span>}
                    </label>
                    <div className={`relative transition-all ${focusedField === 'organization' ? 'scale-[1.01]' : ''}`}>
                      <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <Building2 className={`w-5 h-5 transition-colors ${focusedField === 'organization' ? 'text-emerald-500' : 'text-gray-400'}`} />
                      </div>
                      <input
                        type="text"
                        name="organization"
                        value={formData.organization}
                        onChange={handleChange}
                        onFocus={() => setFocusedField('organization')}
                        onBlur={() => setFocusedField('')}
                        className="w-full pl-12 pr-4 py-3.5 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 outline-none transition-all text-gray-800"
                        placeholder="Your organization name"
                      />
                    </div>
                    {formData.role === 'health_official' && (
                      <p className="text-xs text-gray-500 mt-2 flex items-center gap-1">
                        <span className="w-1.5 h-1.5 bg-emerald-500 rounded-full"></span>
                        Required for Health Officials
                      </p>
                    )}
                  </div>
                </div>
              </div>

              {/* Submit Section */}
              <div className="flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200">
                <button
                  type="submit"
                  className="flex-1 bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-semibold py-4 rounded-xl hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all duration-200"
                >
                  Create Account
                </button>
                <a
                  href="#"
                  className="flex-1 bg-gray-100 text-gray-700 font-semibold py-4 rounded-xl hover:bg-gray-200 transition-all duration-200 text-center"
                >
                  Already have an account? <span className="text-emerald-600">Login</span>
                </a>
              </div>

              {/* Terms */}
              <p className="text-center text-sm text-gray-500 mt-6">
                By creating an account, you agree to our{' '}
                <a href="#" className="text-emerald-600 hover:text-emerald-700 font-medium">Terms of Service</a>
                {' '}and{' '}
                <a href="#" className="text-emerald-600 hover:text-emerald-700 font-medium">Privacy Policy</a>
              </p>
            </div>
          </div>
        </div>

        {/* Footer */}
        <div className="text-center mt-8 text-gray-500 text-sm">
          <p>Â© 2024 Climate Health Tracker. Protecting communities through data.</p>
        </div>
      </div>

      <style jsx>{`
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        * {
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }

        @keyframes slideIn {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }

        .animate-slideIn {
          animation: slideIn 0.3s ease-out;
        }

        input::placeholder,
        select option:first-child {
          color: #9ca3af;
        }

        input:focus::placeholder {
          color: #d1d5db;
        }

        select {
          appearance: none;
          background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
          background-position: right 0.75rem center;
          background-repeat: no-repeat;
          background-size: 1.5em 1.5em;
          padding-right: 2.5rem;
        }
      `}</style>
    </div>
  );
}